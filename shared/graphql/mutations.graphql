# Shared GraphQL Mutations
# Updated to match actual Hasura schema

# ============================================
# Audit Mutations
# ============================================

# Log an audit event
mutation LogAuditEvent($input: auditLogsInsertInput!) {
  insertAuditLogsOne: insertAuditLog(object: $input) {
    id
    eventTime
  }
}

# ============================================
# Note Mutations
# ============================================

# NOTE: Note mutations moved to domains/notes/graphql/mutations.graphql
# for better domain isolation and comprehensive operations

# ============================================
# File Operations Mutations
# ============================================

# Insert a file record
mutation InsertFile($input: filesInsertInput!) {
  insertFile(object: $input) {
    id
    filename
    bucket
    objectKey
    size
    mimetype
    url
    clientId
    payrollId
    uploadedBy
    category
    isPublic
    metadata
    fileType
    createdAt
  }
}

# Update file metadata
mutation UpdateFileMetadata($id: uuid!, $updates: filesSetInput!) {
  updateFileById(pkColumns: {id: $id}, _set: $updates) {
    id
    filename
    bucket
    objectKey
    size
    mimetype
    url
    clientId
    payrollId
    uploadedBy
    category
    isPublic
    metadata
    fileType
    createdAt
  }
}

# Delete a file
mutation DeleteFile($id: uuid!) {
  deleteFileById(id: $id) {
    id
    filename
    objectKey
  }
}

# ============================================
# Generic Mutations
# ============================================

# Refresh data - forces Apollo cache update
mutation RefreshData {
  __typename
}