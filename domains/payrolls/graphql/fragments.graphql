# Payrolls Domain Fragments
# Security Classification: MEDIUM - Business operational data
# SOC2 Compliance: Payroll processing with audit requirements

fragment PayrollCore on payrolls {
  id
  name
  status
  clientId
  employeeCount
  goLiveDate
  payrollSystem
  processingTime
  processingDaysBeforeEft
  createdAt
  updatedAt
  versionNumber
  supersededDate
}

fragment PayrollBasic on payrolls {
  ...PayrollCore
  primaryConsultantUserId
  backupConsultantUserId
  managerUserId
  cycleId
  dateTypeId
  dateValue
}

fragment PayrollDetailed on payrolls {
  ...PayrollBasic
  parentPayrollId
  versionReason
  createdByUserId
}

fragment PayrollWithClient on payrolls {
  ...PayrollBasic
  client {
    id
    name
    contactPerson
    contactEmail
    active
  }
}

fragment PayrollWithUsers on payrolls {
  ...PayrollBasic
  primaryConsultant {
    id
    name
    email
    role
    isActive
  }
  backupConsultant {
    id
    name
    email
    role
    isActive
  }
  manager {
    id
    name
    email
    role
    isActive
  }
}

fragment PayrollWithCycle on payrolls {
  ...PayrollBasic
  payrollCycle {
    id
    name
    description
  }
  payrollDateType {
    id
    name
    description
  }
}

fragment PayrollWithAllRelations on payrolls {
  ...PayrollDetailed
  client {
    id
    name
    contactPerson
    contactEmail
    active
  }
  primaryConsultant {
    id
    name
    email
    role
    isActive
  }
  backupConsultant {
    id
    name
    email
    role
    isActive
  }
  manager {
    id
    name
    email
    role
    isActive
  }
  payrollCycle {
    id
    name
    description
  }
  payrollDateType {
    id
    name
    description
  }
  # Note: createdByUser relationship not available, use createdByUserId instead
  createdByUserId
  parentPayroll {
    id
    name
    versionNumber
    status
  }
}

# Performance-optimized fragments

fragment PayrollSummary on payrolls {
  id
  name
  status
  clientId
  employeeCount
  supersededDate
}

fragment PayrollListItem on payrolls {
  ...PayrollSummary
  goLiveDate
  primaryConsultantUserId
  backupConsultantUserId
  managerUserId
  createdAt
  updatedAt
  client {
    id
    name
  }
}

fragment PayrollTableRow on payrolls {
  ...PayrollListItem
  payrollSystem
  processingTime
  versionNumber
  primaryConsultant {
    id
    name
  }
  backupConsultant {
    id
    name
  }
  manager {
    id
    name
  }
}

fragment PayrollDashboardCard on payrolls {
  ...PayrollSummary
  goLiveDate
  primaryConsultant {
    id
    name
  }
  client {
    id
    name
  }
  payrollCycle {
    id
    name
    description
  }
}

fragment PayrollMinimal on payrolls {
  id
  name
  status
  clientId
}

fragment PayrollForAssignment on payrolls {
  id
  name
  status
  employeeCount
  goLiveDate
  client {
    id
    name
  }
  primaryConsultantUserId
  backupConsultantUserId
  managerUserId
}

fragment PayrollForAudit on payrolls {
  id
  name
  status
  clientId
  employeeCount
  goLiveDate
  versionNumber
  createdAt
  updatedAt
  # Personal data excluded from audit logs
}

fragment PayrollVersionInfo on payrolls {
  id
  name
  versionNumber
  versionReason
  parentPayrollId
  supersededDate
  createdAt
  # Note: createdByUser relationship not available, use createdByUserId instead
  createdByUserId
}

fragment PayrollWithDates on payrolls {
  ...PayrollCore
  payrollDates(orderBy: { originalEftDate: ASC }) {
    id
    originalEftDate
    adjustedEftDate
    processingDate
    notes
    createdAt
    updatedAt
  }
}

fragment PayrollProcessingInfo on payrolls {
  id
  name
  status
  payrollSystem
  processingTime
  processingDaysBeforeEft
  goLiveDate
  employeeCount
  client {
    id
    name
  }
  payrollCycle {
    id
    name
    description
  }
}

fragment PayrollWorkload on payrolls {
  id
  name
  status
  employeeCount
  client {
    id
    name
  }
  payrollCycle {
    id
    name
    description
  }
}

# Payroll date fragments
fragment PayrollDate on payrollDates {
  id
  originalEftDate
  adjustedEftDate
  processingDate
  notes
  payrollId
  createdAt
  updatedAt
}