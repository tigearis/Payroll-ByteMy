# Notes Domain Subscriptions
# Security Classification: MEDIUM - Real-time internal data
# SOC2 Compliance: User-based access control enforced by Hasura

subscription NotesUpdates($entity_id: uuid!, $entity_type: String!) {
  notes(
    where: {
      entity_id: { _eq: $entity_id }
      entity_type: { _eq: $entity_type }
    }
    order_by: { created_at: desc }
  ) {
    ...NoteWithUser
  }
}

subscription ImportantNotesUpdates($entity_id: uuid!, $entity_type: String!) {
  notes(
    where: { is_important: { _eq: true } }
    order_by: { created_at: desc }
  ) {
    ...NoteWithUser
  }
}

subscription NoteUpdates($id: uuid!) {
  notes_by_pk(id: $id) {
    ...NoteWithUser
  }
}
