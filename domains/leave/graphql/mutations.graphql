# Leave Domain Mutations

mutation CreateLeaveRequest($object: leave_insert_input!) {
  insertLeave(object: $object) {
    ...LeaveWithManager
  }
}

mutation UpdateLeaveRequest($id: uuid!, $set: leave_set_input!) {
  updateLeave(pk_columns: { id: $id }, _set: $set) {
    ...LeaveWithManager
  }
}

mutation ApproveLeaveRequest($id: uuid!) {
  updateLeave(pk_columns: { id: $id }, _set: { status: "Approved" }) {
    ...LeaveCore
  }
}

mutation RejectLeaveRequest($id: uuid!, $reason: String) {
  updateLeave(pk_columns: { id: $id }, _set: { reason: $reason }) {
    ...LeaveCore
  }
}

mutation DeleteLeaveRequest($id: uuid!) {
  deleteLeave(id: $id) {
    id
  }
}

mutation BulkApproveLeaveRequests($ids: [uuid!]!) {
  updateLeaves(where: { id: { _in: $ids } }, _set: { status: "Approved" }) {
    affected_rows
    returning {
      ...LeaveCore
    }
  }
}

mutation BulkRejectLeaveRequests($ids: [uuid!]!, $reason: String) {
  updateLeaves(where: { id: { _in: $ids } }, _set: { reason: $reason }) {
    affected_rows
    returning {
      ...LeaveCore
    }
  }
}
