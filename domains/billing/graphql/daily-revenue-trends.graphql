# Daily Revenue Trends

query GetDailyRevenueTrends(
  $dateFrom: date!
  $dateTo: date!
  $clientId: uuid
  $staffUserId: uuid
) {
  dailyAnalytics: billingAnalyticsDaily(
    where: {
      analyticsDate: { _gte: $dateFrom, _lte: $dateTo }
      clientId: { _eq: $clientId }
      staffUserId: { _eq: $staffUserId }
    }
    orderBy: { analyticsDate: ASC }
  ) {
    analyticsDate
    itemCount
    totalAmount
    totalRevenue
    approvedCount
    pendingCount
    draftCount
    approvedRevenue
    pendingRevenue
    draftRevenue
  }

  periodSummary: billingAnalyticsDailyAggregate(
    where: {
      analyticsDate: { _gte: $dateFrom, _lte: $dateTo }
      clientId: { _eq: $clientId }
      staffUserId: { _eq: $staffUserId }
    }
  ) {
    aggregate {
      sum {
        itemCount
        totalRevenue
        approvedRevenue
        pendingRevenue
      }
      avg {
        totalAmount
      }
    }
  }
}

