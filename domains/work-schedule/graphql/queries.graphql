# Work Schedule Domain Queries

query GetWorkSchedules(
  $where: work_schedule_bool_exp
  $order_by: [work_schedule_order_by!]
) {
  workSchedules(where: $where, order_by: $order_by) {
    ...WorkScheduleWithUser
  }
}

query GetWorkScheduleByUser($user_id: uuid!) {
  workSchedules(
    where: { userId: { _eq: $user_id } }
    order_by: { workDay: asc }
  ) {
    ...WorkScheduleCore
  }
}

query GetWorkScheduleById($id: uuid!) {
  workSchedule(id: $id) {
    ...WorkScheduleWithUser
  }
}

query GetTeamWorkSchedules($user_ids: [uuid!]!) {
  workSchedules(
    where: { userId: { _in: $user_ids } }
    order_by: [{ userId: asc }, { workDay: asc }]
  ) {
    ...WorkScheduleWithUser
  }
}

query GetWorkScheduleAnalytics {
  total_hours_by_day: workSchedulesAggregate {
    nodes {
      workDay
    }
    aggregate {
      sum {
        workHours
      }
      avg {
        workHours
      }
      count
    }
  }

  users_by_workDay: workSchedules {
    workDay
    user {
      id
      name
    }
    workHours
  }

  average_hours_per_user: workSchedulesAggregate(order_by: { userId: asc }) {
    aggregate {
      sum {
        workHours
      }
      avg {
        workHours
      }
    }
    nodes {
      user {
        id
        name
      }
    }
  }
}
