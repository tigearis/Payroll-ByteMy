# Permissions Domain Subscriptions

# Subscribe to role changes
subscription RolesUpdated {
  roles(orderBy: { updatedAt: DESC }) {
    ...RoleCore
  }
}

# Subscribe to user role changes
subscription UserRolesUpdated($userId: uuid!) {
  userRoles(where: { userId: { _eq: $userId } }) {
    ...UserRoleWithDetails
  }
}

# Subscribe to role permission changes
subscription RolePermissionsUpdated($roleId: uuid!) {
  rolePermissions(where: { roleId: { _eq: $roleId } }) {
    ...RolePermissionWithDetails
  }
}

# Subscribe to feature flag changes
subscription PermissionsUpdated {
  permissions(orderBy: { updatedAt: DESC }) {
    ...PermissionWithResource
  }
}

subscription ResourcesUpdated {
  resources(orderBy: { updatedAt: DESC }) {
    ...ResourceCore
  }
}
