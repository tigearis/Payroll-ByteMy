# Permission Domain Fragments

# Resource core info
fragment ResourceCore on resources {
  id
  name
  displayName
  description
}

# Permission core info - fixing field names to match schema
fragment PermissionCore on permissions {
  id
  resourceId
  action
  description
  legacyPermissionName
  relatedResource {
    ...ResourceCore
  }
}

# Permission with resource details - this was the missing fragment
fragment PermissionWithResource on permissions {
  ...PermissionCore
}

# Role core info
fragment RoleCore on roles {
  id
  name
  displayName
  description
  isSystemRole
  priority
}

# Role permission with details - fixing relationship field names
fragment RolePermissionWithDetails on rolePermissions {
  id
  roleId
  permissionId
  conditions
  createdAt
  grantedToRole {
    ...RoleCore
  }
  grantedPermission {
    ...PermissionCore
  }
}

# User role with details - fixing relationship field names
fragment UserRoleWithDetails on userRoles {
  id
  userId
  roleId
  createdAt
  roleUser {
    ...UserMinimal
  }
  assignedRole {
    ...RoleCore
  }
}

# Feature flag core - fixing field names to match schema
fragment FeatureFlagCore on featureFlags {
  id
  featureName
  isEnabled
  allowedRoles
  updatedAt
}

# App settings core - fixing field names to match schema
fragment AppSettingsCore on appSettings {
  id
  permissions
}
