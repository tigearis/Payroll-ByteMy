# Permissions Domain Fragments
# Import shared fragments: ResourceCore, PermissionCore, RoleCore, UserRoleCore, RolePermissionCore

fragment RoleWithPermissions on roles {
  ...RoleCore
  assignedPermissions {
    id
    conditions
    grantedPermission {
      ...PermissionWithResource
    }
  }
  assignedPermissionsAggregate {
    aggregate {
      count
    }
  }
}

# RolePermissionCore and UserRoleCore now moved to shared/graphql/fragments.graphql

fragment RolePermissionWithDetails on rolePermissions {
  id
  roleId
  permissionId
  conditions
  createdAt
  updatedAt
  grantedToRole {
    ...RoleCore
  }
  grantedPermission {
    ...PermissionCore
  }
}

fragment UserRoleWithDetails on userRoles {
  id
  userId
  roleId
  createdAt
  updatedAt
  roleUser {
    id
    name
    email
    isActive
  }
  assignedRole {
    ...RoleCore
  }
}

fragment FeatureFlagCore on featureFlags {
  id
  featureName
  isEnabled
  allowedRoles
  updatedAt
}

fragment AppSettingsCore on appSettings {
  id
  permissions
}
