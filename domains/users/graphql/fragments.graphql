# Users Domain Fragments
# Security Classification: CRITICAL - Contains PII and authentication data
# SOC2 Compliance: Employee data with strict access controls

fragment UserCore on users {
  id
  name
  email
  isActive
  isStaff
  role
  clerkUserId
  createdAt
  updatedAt
}

fragment UserWithProfile on users {
  ...UserCore
  username
  image
}

fragment UserWithRoles on users {
  ...UserCore
  userRoles {
    id
    role {
      id
      name
      displayName
      description
      priority
      isSystemRole
      rolePermissions {
        id
        conditions
        permission {
          id
          action
          description
          resource {
            id
            name
            displayName
            description
          }
        }
      }
    }
  }
}

fragment UserWithTeam on users {
  ...UserCore
  teamMembers {
    id
    name
    email
    isActive
    role
  }
}

fragment UserWithWorkSchedule on users {
  ...UserCore
  workSchedules {
    id
    workDay
    workHours
    createdAt
    updatedAt
  }
}

fragment UserWithPayrolls on users {
  ...UserCore
}

fragment UserWithAllRelations on users {
  ...UserWithProfile
  userRoles {
    id
    role {
      id
      name
      displayName
      description
      priority
    }
  }
  teamMembers {
    id
    name
    email
    role
  }
  workSchedules {
    id
    workDay
    workHours
    createdAt
    updatedAt
  }
}

fragment UserBasicInfo on users {
  id
  name
  email
  role
  username
  image
  isStaff
  isActive
  managerId
  clerkUserId
}

fragment UserWithManager on users {
  ...UserBasicInfo
  manager {
    id
    name
    email
    role
  }
}

fragment UserForStaff on users {
  ...UserWithProfile
}

fragment UserForAuth on users {
  id
  name
  email
  role
  isActive
  clerkUserId
}

fragment UserForAudit on users {
  id
  name
  email
  role
  isActive
  # Sensitive fields excluded from audit logs
}

fragment UserRoleInfo on users {
  id
  name
  email
  role
  isActive
  userRoles {
    role {
      name
      description
    }
  }
}

fragment UserPermissionsInfo on users {
  id
  name
  role
  userRoles {
    role {
      name
      rolePermissions {
        permission {
          resource {
            name
          }
          action
          description
        }
      }
    }
  }
}
