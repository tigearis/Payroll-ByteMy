# Users Domain Fragments
# Security Classification: CRITICAL - Contains PII and authentication data
# SOC2 Compliance: Employee data with strict access controls

fragment UserCore on Users {
  id
  firstName
  lastName
  computedName
  email
  isActive
  isStaff
  role
  position
  clerkUserId
  createdAt
  updatedAt
}

fragment UserWithProfile on Users {
  ...UserCore
  username
  image
  phone
  address
  bio
}

fragment UserWithRoles on Users {
  ...UserCore
  # assignedRoles removed - using simple role field instead
}

fragment UserWithTeam on Users {
  ...UserCore
  # Team members not available in schema - removed
}

fragment UserWithWorkSchedule on Users {
  ...UserCore
  workSchedules {
    id
    workDay
    workHours
    adminTimeHours
    payrollCapacityHours
    usesDefaultAdminTime
    createdAt
    updatedAt
  }
}

fragment UserWithPayrolls on Users {
  ...UserCore
}

fragment UserWithAllRelations on Users {
  ...UserWithProfile
  # assignedRoles removed - using simple role field instead
  # Team members not available in schema - removed
  workSchedules {
    id
    workDay
    workHours
    adminTimeHours
    payrollCapacityHours
    usesDefaultAdminTime
    createdAt
    updatedAt
  }
}

fragment UserBasicInfo on Users {
  id
  firstName
  lastName
  computedName
  email
  role
  position
  username
  image
  isStaff
  isActive
  managerId
  clerkUserId
}

# UserWithManager is defined in shared GraphQL

fragment UserForStaff on Users {
  ...UserWithProfile
}

fragment UserForAuth on Users {
  id
  firstName
  lastName
  computedName
  email
  role
  isActive
  clerkUserId
}

fragment UserForAudit on Users {
  id
  firstName
  lastName
  computedName
  email
  role
  isActive
  # Sensitive fields excluded from audit logs
}

fragment UserRoleInfo on Users {
  id
  firstName
  lastName
  computedName
  email
  role
  isActive
  # assignedRoles removed - using simple role field instead
}

fragment UserPermissionsInfo on Users {
  id
  firstName
  lastName
  computedName
  role
  # assignedRoles removed - using simple role field instead
}

# Performance-optimized fragments for Phase 2

fragment UserSummary on Users {
  id
  firstName
  lastName
  computedName
  role
  position
  isActive
  isStaff
}

fragment UserListItem on Users {
  ...UserSummary
  email
  managerId
  clerkUserId
  updatedAt
}

fragment UserDashboardCard on Users {
  ...UserSummary
  manager {
    id
    firstName
    lastName
    computedName
  }
}

fragment UserTeamSummary on Users {
  ...UserSummary
  email
  manager {
    id
    firstName
    lastName
    computedName
  }
  # directReports not available in schema - removed
}

fragment UserTableRow on Users {
  ...UserListItem
  manager {
    id
    firstName
    lastName
    computedName
  }
}
