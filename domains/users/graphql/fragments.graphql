# Users Domain Fragments
# Security Classification: CRITICAL - Contains PII and authentication data
# SOC2 Compliance: Employee data with strict access controls

fragment UserCore on users {
  id
  firstName
  lastName
  computedName
  email
  isActive
  isStaff
  role
  position
  clerkUserId
  createdAt
  updatedAt
}

fragment UserWithProfile on users {
  ...UserCore
  username
  image
  phone
  address
  bio
}

fragment UserWithRoles on users {
  ...UserCore
  # assignedRoles removed - using simple role field instead
}

fragment UserWithTeam on users {
  ...UserCore
  # Team members not available in schema - removed
}

fragment UserWithWorkSchedule on users {
  ...UserCore
  userWorkSchedules {
    id
    workDay
    workHours
    adminTimeHours
    payrollCapacityHours
    usesDefaultAdminTime
    createdAt
    updatedAt
  }
}

fragment UserWithPayrolls on users {
  ...UserCore
}

fragment UserWithAllRelations on users {
  ...UserWithProfile
  # assignedRoles removed - using simple role field instead
  # Team members not available in schema - removed
  userWorkSchedules {
    id
    workDay
    workHours
    adminTimeHours
    payrollCapacityHours
    usesDefaultAdminTime
    createdAt
    updatedAt
  }
}

fragment UserBasicInfo on users {
  id
  firstName
  lastName
  computedName
  email
  role
  position
  username
  image
  isStaff
  isActive
  managerId
  clerkUserId
}

# UserWithManager is defined in shared GraphQL

fragment UserForStaff on users {
  ...UserWithProfile
}

fragment UserForAuth on users {
  id
  firstName
  lastName
  computedName
  email
  role
  isActive
  clerkUserId
}

fragment UserForAudit on users {
  id
  firstName
  lastName
  computedName
  email
  role
  isActive
  # Sensitive fields excluded from audit logs
}

fragment UserRoleInfo on users {
  id
  firstName
  lastName
  computedName
  email
  role
  isActive
  # assignedRoles removed - using simple role field instead
}

fragment UserPermissionsInfo on users {
  id
  firstName
  lastName
  computedName
  role
  # assignedRoles removed - using simple role field instead
}

# Performance-optimized fragments for Phase 2

fragment UserSummary on users {
  id
  firstName
  lastName
  computedName
  role
  position
  isActive
  isStaff
}

fragment UserListItem on users {
  ...UserSummary
  email
  managerId
  clerkUserId
  updatedAt
}

fragment UserDashboardCard on users {
  ...UserSummary
  managerUser {
    id
    firstName
    lastName
    computedName
  }
}

fragment UserTeamSummary on users {
  ...UserSummary
  email
  managerUser {
    id
    firstName
    lastName
    computedName
  }
  # directReports not available in schema - removed
}

fragment UserTableRow on users {
  ...UserListItem
  managerUser {
    id
    firstName
    lastName
    computedName
  }
}
