# Users Domain Mutations
# Security Classification: CRITICAL - Employee PII and authentication data

mutation CreateUser($object: users_insert_input!) {
  insertUser(object: $object) {
    id
    name
    email
    role
    username
    image
    isStaff
    isActive
    managerId
    clerkUserId
  }
}

mutation UpdateUser($id: uuid!, $set: users_set_input!) {
  updateUser(pk_columns: { id: $id }, _set: $set) {
    id
    name
    email
    role
    username
    image
    isStaff
    isActive
    managerId
    clerkUserId
  }
}

mutation DeleteUser($id: uuid!) {
  updateUser(
    pk_columns: { id: $id }
    _set: { isActive: false, deactivatedAt: "now()" }
  ) {
    id
    name
    email
    isActive
    deactivatedAt
  }
}

# Staff mutations (for compatibility with existing code)
mutation UpdateStaff($id: uuid!, $set: users_set_input!) {
  updateUser(pk_columns: { id: $id }, _set: $set) {
    id
    name
    email
    role
    username
    image
    isStaff
    isActive
    managerId
    clerkUserId
  }
}

mutation DeleteStaff($id: uuid!) {
  updateUser(
    pk_columns: { id: $id }
    _set: { isActive: false, deactivatedAt: "now()" }
  ) {
    id
    name
    email
    isActive
    deactivatedAt
  }
}
