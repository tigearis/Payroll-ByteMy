table:
  name: billing_invoice_item
  schema: public
configuration:
  column_config:
    billing_period_end:
      custom_name: billingPeriodEnd
    billing_period_start:
      custom_name: billingPeriodStart
    created_at:
      custom_name: createdAt
    description_override:
      custom_name: descriptionOverride
    hourly_rate:
      custom_name: hourlyRate
    invoice_id:
      custom_name: invoiceId
    item_id:
      custom_name: itemId
    line_item_type:
      custom_name: lineItemType
    net_amount:
      custom_name: netAmount
    quantity_hours:
      custom_name: quantityHours
    tax_amount:
      custom_name: taxAmount
    total_amount:
      custom_name: totalAmount
    updated_at:
      custom_name: updatedAt
  custom_column_names:
    billing_period_end: billingPeriodEnd
    billing_period_start: billingPeriodStart
    created_at: createdAt
    description_override: descriptionOverride
    hourly_rate: hourlyRate
    invoice_id: invoiceId
    item_id: itemId
    line_item_type: lineItemType
    net_amount: netAmount
    quantity_hours: quantityHours
    tax_amount: taxAmount
    total_amount: totalAmount
    updated_at: updatedAt
  custom_name: billingInvoiceItem
  custom_root_fields:
    delete: deleteBillingInvoiceItem
    delete_by_pk: deleteBillingInvoiceItemById
    insert: insertBillingInvoiceItem
    insert_one: insertBillingInvoiceItemOne
    select: billingInvoiceItems
    select_aggregate: billingInvoiceItemsAggregate
    select_by_pk: billingInvoiceItemById
    select_stream: billingInvoiceItemsStream
    update: updateBillingInvoiceItem
    update_by_pk: updateBillingInvoiceItemById
    update_many: updateBillingInvoiceItemMany
object_relationships:
  - name: billingInvoice
    using:
      foreign_key_constraint_on: invoice_id
  - name: billingItem
    using:
      foreign_key_constraint_on: item_id
insert_permissions:
  - role: developer
    permission:
      check: {}
      columns:
        - invoice_id
        - item_id
        - quantity_hours
        - hourly_rate
        - total_amount
        - tax_amount
        - description_override
        - line_item_type
        - billing_period_start
        - billing_period_end
  - role: manager
    permission:
      check:
        billingInvoice:
          client:
            payrolls:
              _or:
                - manager_user_id:
                    _eq: X-Hasura-User-Id
                - primary_consultant_user_id:
                    _eq: X-Hasura-User-Id
                - backup_consultant_user_id:
                    _eq: X-Hasura-User-Id
      columns:
        - invoice_id
        - item_id
        - quantity_hours
        - hourly_rate
        - total_amount
        - tax_amount
        - description_override
        - line_item_type
        - billing_period_start
        - billing_period_end
  - role: org_admin
    permission:
      check: {}
      columns:
        - invoice_id
        - item_id
        - quantity_hours
        - hourly_rate
        - total_amount
        - tax_amount
        - description_override
        - line_item_type
        - billing_period_start
        - billing_period_end
select_permissions:
  - role: ai_assistant
    permission:
      columns:
        - id
        - quantity_hours
        - total_amount
        - net_amount
        - line_item_type
        - billing_period_start
        - billing_period_end
        - created_at
      filter: {}
  - role: consultant
    permission:
      columns:
        - id
        - invoice_id
        - item_id
        - quantity_hours
        - hourly_rate
        - total_amount
        - tax_amount
        - net_amount
        - description_override
        - line_item_type
        - billing_period_start
        - billing_period_end
        - created_at
        - updated_at
      filter:
        billingInvoice:
          client:
            payrolls:
              _or:
                - primary_consultant_user_id:
                    _eq: X-Hasura-User-Id
                - backup_consultant_user_id:
                    _eq: X-Hasura-User-Id
  - role: developer
    permission:
      columns:
        - id
        - invoice_id
        - item_id
        - quantity_hours
        - hourly_rate
        - total_amount
        - tax_amount
        - net_amount
        - description_override
        - line_item_type
        - billing_period_start
        - billing_period_end
        - created_at
        - updated_at
      filter: {}
  - role: manager
    permission:
      columns:
        - id
        - invoice_id
        - item_id
        - quantity_hours
        - hourly_rate
        - total_amount
        - tax_amount
        - net_amount
        - description_override
        - line_item_type
        - billing_period_start
        - billing_period_end
        - created_at
        - updated_at
      filter:
        billingInvoice:
          client:
            payrolls:
              _or:
                - manager_user_id:
                    _eq: X-Hasura-User-Id
                - primary_consultant_user_id:
                    _eq: X-Hasura-User-Id
                - backup_consultant_user_id:
                    _eq: X-Hasura-User-Id
  - role: org_admin
    permission:
      columns:
        - id
        - invoice_id
        - item_id
        - quantity_hours
        - hourly_rate
        - total_amount
        - tax_amount
        - net_amount
        - description_override
        - line_item_type
        - billing_period_start
        - billing_period_end
        - created_at
        - updated_at
      filter: {}
  - role: viewer
    permission:
      columns:
        - id
        - quantity_hours
        - total_amount
        - net_amount
        - billing_period_start
        - billing_period_end
      filter:
        billingInvoice:
          client:
            payrolls:
              _or:
                - primary_consultant_user_id:
                    _eq: X-Hasura-User-Id
                - backup_consultant_user_id:
                    _eq: X-Hasura-User-Id
update_permissions:
  - role: developer
    permission:
      columns:
        - quantity_hours
        - hourly_rate
        - total_amount
        - tax_amount
        - description_override
        - line_item_type
        - billing_period_start
        - billing_period_end
      filter: {}
      check: null
  - role: manager
    permission:
      columns:
        - quantity_hours
        - hourly_rate
        - total_amount
        - tax_amount
        - description_override
        - line_item_type
        - billing_period_start
        - billing_period_end
      filter:
        billingInvoice:
          client:
            payrolls:
              _or:
                - manager_user_id:
                    _eq: X-Hasura-User-Id
                - primary_consultant_user_id:
                    _eq: X-Hasura-User-Id
                - backup_consultant_user_id:
                    _eq: X-Hasura-User-Id
      check: null
  - role: org_admin
    permission:
      columns:
        - quantity_hours
        - hourly_rate
        - total_amount
        - tax_amount
        - description_override
        - line_item_type
        - billing_period_start
        - billing_period_end
      filter: {}
      check: null
delete_permissions:
  - role: developer
    permission:
      filter: {}
  - role: manager
    permission:
      filter:
        _and:
          - billingInvoice:
              client:
                payrolls:
                  _or:
                    - manager_user_id:
                        _eq: X-Hasura-User-Id
                    - primary_consultant_user_id:
                        _eq: X-Hasura-User-Id
                    - backup_consultant_user_id:
                        _eq: X-Hasura-User-Id
          - billingInvoice:
              status:
                _neq: paid
  - role: org_admin
    permission:
      filter: {}
